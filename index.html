<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CloudClip | 注专转 拽住  砖专</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Heebo', sans-serif; background-color: #0f172a; color: #f8fafc; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-left: 5px; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div class="w-full max-w-2xl glass rounded-3xl p-6 md:p-8 shadow-2xl">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-900 tracking-tighter text-blue-400">CloudClip<span class="text-white">.</span></h1>
            <div class="text-xs text-slate-400 flex items-center">
                <span id="status-dot" class="status-dot bg-slate-500"></span>
                <span id="status-text">转 驻转...</span>
            </div>
        </div>

        <!-- 专转 驻转 -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-slate-400 mb-2">驻转  (爪 驻转 拽注 砖砖):</label>
            <div class="flex gap-2">
                <input type="password" id="board-key" placeholder="砖: almog-secret-787" 
                       class="flex-1 bg-slate-800 border-none p-3 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-center tracking-widest">
                <button id="lock-btn" class="bg-slate-700 hover:bg-slate-600 px-4 rounded-xl transition-all"></button>
            </div>
        </div>

        <!-- 专 拽住 -->
        <div class="relative mb-6">
            <textarea id="main-text" placeholder="拽  转 拽住 砖专爪 注专..." 
                      class="w-full h-64 bg-slate-900/50 border border-slate-700 p-4 rounded-2xl focus:border-blue-500 outline-none transition-all resize-none text-lg custom-scrollbar"></textarea>
            
            <button id="clear-btn" class="absolute bottom-4 left-4 text-slate-500 hover:text-red-400 text-sm">拽 </button>
        </div>

        <!-- 驻转专 驻注 -->
        <div class="grid grid-cols-2 gap-4">
            <button id="save-btn" disabled class="bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 text-white font-bold py-4 rounded-2xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2">
                <span></span> 砖专 注
            </button>
            <button id="load-btn" disabled class="bg-white hover:bg-slate-100 disabled:bg-slate-700 text-slate-900 font-bold py-4 rounded-2xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2">
                <span></span> 砖 注
            </button>
        </div>

        <button id="copy-btn" class="w-full mt-4 bg-slate-800 hover:bg-slate-700 text-slate-300 py-3 rounded-xl text-sm font-medium transition-all">
            注转拽 拽住  (Clipboard)
        </button>
    </div>

    <p class="mt-6 text-slate-500 text-xs text-center max-w-sm">
        拽住 砖专 砖专转  . 驻转 砖  专  注 注.  转砖转砖 驻转转 拽 砖.
    </p>

    <script>
        // 砖砖 -API 爪专 砖 npoint.io  -JSON
        // 驻转 砖 驻 -ID 砖 -Bin
        let boardId = "";
        
        const boardKeyInput = document.getElementById('board-key');
        const lockBtn = document.getElementById('lock-btn');
        const mainText = document.getElementById('main-text');
        const saveBtn = document.getElementById('save-btn');
        const loadBtn = document.getElementById('load-btn');
        const statusDot = document.getElementById('status-dot');
        const statusText = document.getElementById('status-text');

        // 注转 驻转 砖专 驻驻
        if(localStorage.getItem('cloudclip_key')) {
            boardKeyInput.value = localStorage.getItem('cloudclip_key');
            updateBoardState();
        }

        boardKeyInput.oninput = updateBoardState;

        function updateBoardState() {
            const key = boardKeyInput.value.trim();
            if(key.length >= 4) {
                // 爪专转   住住 注 驻转 砖 (Hash 驻砖)
                boardId = btoa(key).replace(/=/g, '').substring(0, 15).toLowerCase();
                saveBtn.disabled = false;
                loadBtn.disabled = false;
                statusDot.className = "status-dot bg-green-500";
                statusText.innerText = "  住专";
                localStorage.setItem('cloudclip_key', key);
            } else {
                saveBtn.disabled = true;
                loadBtn.disabled = true;
                statusDot.className = "status-dot bg-slate-500";
                statusText.innerText = "驻转 拽爪专 ...";
            }
        }

        // 驻拽爪转 砖专 (POST/PUT)
        saveBtn.onclick = async () => {
            const text = mainText.value;
            statusText.innerText = "砖专...";
            
            try {
                //  砖转砖 砖专转 砖拽专 kvstore.io  
                // 爪专 驻砖转 爪转, 砖转砖 -npoint 砖驻砖专 住 JSON 驻转
                const response = await fetch(`https://api.npoint.io/${boardId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ clip: text, updated: new Date().getTime() })
                });

                if(response.ok) {
                    statusText.innerText = "砖专 爪!";
                    setTimeout(updateBoardState, 2000);
                }
            } catch (e) {
                statusText.innerText = "砖转 砖专";
            }
        };

        // 驻拽爪转 砖 (GET)
        loadBtn.onclick = async () => {
            statusText.innerText = "砖 转...";
            try {
                const response = await fetch(`https://api.npoint.io/${boardId}`);
                const data = await response.json();
                if(data && data.clip !== undefined) {
                    mainText.value = data.clip;
                    statusText.innerText = "拽住 注!";
                    setTimeout(updateBoardState, 2000);
                } else {
                    statusText.innerText = " 专拽";
                }
            } catch (e) {
                statusText.innerText = "  爪 注";
            }
        };

        // 注专
        document.getElementById('copy-btn').onclick = () => {
            mainText.select();
            document.execCommand('copy');
            alert("拽住 注转拽!");
        };

        document.getElementById('clear-btn').onclick = () => {
            if(confirm("拽转 转 转?")) mainText.value = "";
        };

        lockBtn.onclick = () => {
            boardKeyInput.type = boardKeyInput.type === 'password' ? 'text' : 'password';
            lockBtn.innerText = boardKeyInput.type === 'password' ? '' : '';
        };

    </script>
</body>
</html>
